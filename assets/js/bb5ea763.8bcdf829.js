"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[688],{8072:(r,n,e)=>{e.r(n),e.d(n,{assets:()=>i,contentTitle:()=>c,default:()=>l,frontMatter:()=>s,metadata:()=>t,toc:()=>p});const t=JSON.parse('{"id":"Architecture/kafka","title":"Kafka","description":"\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432 Kafka:","source":"@site/docs/Architecture/kafka.md","sourceDirName":"Architecture","slug":"/Architecture/kafka","permalink":"/Mobilefinass/docs/Architecture/kafka","draft":false,"unlisted":false,"editUrl":"https://github.com/Embim/Mobilefinass/tree/main/my-website/docs/Architecture/kafka.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Kafka","sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"gRPC","permalink":"/Mobilefinass/docs/Architecture/grpc"},"next":{"title":"\u0410\u041f\u0418","permalink":"/Mobilefinass/docs/category/\u0430\u043f\u0438"}}');var a=e(4848),o=e(8453);const s={title:"Kafka",sidebar_position:3},c=void 0,i={},p=[{value:"Apache avro \u0441\u0445\u0435\u043c\u0430 \u0434\u043b\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438",id:"apache-avro-\u0441\u0445\u0435\u043c\u0430-\u0434\u043b\u044f-\u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438",level:2},{value:"Apache avro \u0441\u0445\u0435\u043c\u0430 \u0434\u043b\u044f \u043e\u0442\u0447\u0435\u0442\u0430",id:"apache-avro-\u0441\u0445\u0435\u043c\u0430-\u0434\u043b\u044f-\u043e\u0442\u0447\u0435\u0442\u0430",level:2},{value:"\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u043d\u0430 python",id:"\u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f-\u043d\u0430-python",level:2},{value:"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430",id:"\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430",level:2}];function d(r){const n={code:"code",h2:"h2",img:"img",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...r.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432 Kafka"}),":"]}),"\n",(0,a.jsxs)(n.p,{children:["\u041a\u043e\u0433\u0434\u0430 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043f\u0443\u0431\u043b\u0438\u043a\u0443\u0435\u0442 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044e \u0432 Kafka-\u0442\u043e\u043f\u0438\u043a transactions, \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u0432 \u0431\u0440\u043e\u043a\u0435\u0440\u0435 Kafka. \u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 ",(0,a.jsx)(n.strong,{children:"\u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e"}),", \u0442\u0430\u043a \u043a\u0430\u043a \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u043e\u0436\u0438\u0434\u0430\u0435\u0442 \u043d\u0435\u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u043e\u0442\u0432\u0435\u0442\u0430 \u043e\u0442 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f (\u0441\u0435\u0440\u0432\u0438\u0441\u0430 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0438). \u041e\u043d\u043e \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0440\u0443\u0433\u0438\u0445 \u0437\u0430\u0434\u0430\u0447."]}),"\n",(0,a.jsxs)(n.p,{children:["Kafka \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0443 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044f\u043c (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0441\u0435\u0440\u0432\u0438\u0441\u0443 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0438) \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e \u043e\u0442 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438. \u042d\u0442\u043e \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 ",(0,a.jsx)(n.strong,{children:"\u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"}),", \u0447\u0442\u043e \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u043c \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u043c \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e\u0441\u0442\u0438."]}),"\n",(0,a.jsx)(n.p,{children:'\u0421\u0435\u0440\u0432\u0438\u0441 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0438 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0438\u0437 Kafka \u0432 \u0441\u0432\u043e\u0435\u043c \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c \u0442\u0435\u043c\u043f\u0435 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 "batch" \u0438\u043b\u0438 "streaming").'}),"\n",(0,a.jsx)(n.p,{children:"\u041e\u043d \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u043a\u0430\u0436\u0434\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e \u0438 \u043d\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u0442 \u043e\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044f (\u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f)."}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u043e\u0442\u0447\u0435\u0442\u043e\u0432 \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u0442\u043e\u043f\u0438\u043a"}),"  c\u0435\u0440\u0432\u0438\u0441 \u0430\u043d\u0430\u043b\u0438\u0442\u0438\u043a\u0438 \u043f\u0443\u0431\u043b\u0438\u043a\u0443\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0435 \u043e\u0442\u0447\u0435\u0442\u044b \u0432 \u043d\u043e\u0432\u044b\u0439 Kafka-\u0442\u043e\u043f\u0438\u043a (analytics_reports). \u042d\u0442\u043e \u0442\u0430\u043a\u0436\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f ",(0,a.jsx)(n.strong,{children:"\u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u043e"}),": \u043d\u0438 Kafka, \u043d\u0438 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0436\u0434\u0443\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438."]}),"\n",(0,a.jsx)(n.p,{children:"\u041b\u044e\u0431\u043e\u0439 \u0434\u0440\u0443\u0433\u043e\u0439 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u0441\u0438\u0441\u0442\u0435\u043c\u044b (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043e\u0442\u0447\u0435\u0442\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0438\u0441) \u043c\u043e\u0436\u0435\u0442 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0442\u043e\u043f\u0438\u043a  analytics_reports \u0438 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435 \u0432 \u0441\u0432\u043e\u0435\u043c \u0442\u0435\u043c\u043f\u0435, \u043d\u0435 \u0432\u043b\u0438\u044f\u044f \u043d\u0430 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u0435\u043b\u044f (\u0430\u043d\u0430\u043b\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0441\u0435\u0440\u0432\u0438\u0441)."}),"\n",(0,a.jsx)(n.img,{src:"https://www.plantuml.com/plantuml/png/dP11ReCm44NtaNA74Njy01Oe87PLfQZ91GOpJIoCxNfigjo-ia50TrMtVzxy-Nyk7D27EEdpwNn26Qo7TzihJOrpIVgA50cAD_mS4LflH_8584CM4k3G1oMLGnEWQ0pgLr2IuKP-Lf8okwa7mvty86TzOBXRfsJcLoKBQMN0W3qoGR5Ce5k5J7TjOhRGKDPBk0gkiTUAdt3tQ1XbKDOaL0W13R-CV7fhR6IuUYk9MPa7224IijGjwprw1HrfDPC_kkKWVxJS2vSrT6q5DvnfhPhcNGlbxuED78tzrZGy9ZBXFsUEZzpViI7xyGkP8Kxw1m00"}),"\n",(0,a.jsx)(n.h2,{id:"apache-avro-\u0441\u0445\u0435\u043c\u0430-\u0434\u043b\u044f-\u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438",children:"Apache avro \u0441\u0445\u0435\u043c\u0430 \u0434\u043b\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "type": "record",\r\n  "name": "Transaction",\r\n  "namespace": "com.example.transaction",\r\n  "fields": [\r\n    { "name": "transactionId", "type": "string", "doc": "\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438" },\r\n    { "name": "userId", "type": "string", "doc": "\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f" },\r\n    { "name": "category", "type": "string", "doc": "\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438" },\r\n    { "name": "amount", "type": "float", "doc": "\u0421\u0443\u043c\u043c\u0430 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438" },\r\n    { "name": "currency", "type": "string", "doc": "\u0412\u0430\u043b\u044e\u0442\u0430 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438" },\r\n    { "name": "timestamp", "type": "string", "doc": "\u0412\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438" }\r\n  ]\r\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"apache-avro-\u0441\u0445\u0435\u043c\u0430-\u0434\u043b\u044f-\u043e\u0442\u0447\u0435\u0442\u0430",children:"Apache avro \u0441\u0445\u0435\u043c\u0430 \u0434\u043b\u044f \u043e\u0442\u0447\u0435\u0442\u0430"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\r\n  "type": "record",\r\n  "name": "AnalyticsReport",\r\n  "namespace": "com.example.analytics",\r\n  "fields": [\r\n    { "name": "userId", "type": "string", "doc": "\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f" },\r\n    { "name": "category", "type": "string", "doc": "\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432" },\r\n    { "name": "totalAmount", "type": "float", "doc": "\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432 \u043f\u043e \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438" },\r\n    { "name": "currency", "type": "string", "doc": "\u0412\u0430\u043b\u044e\u0442\u0430" },\r\n    { "name": "reportTimestamp", "type": "string", "doc": "\u0412\u0440\u0435\u043c\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043e\u0442\u0447\u0435\u0442\u0430" }\r\n  ]\r\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f-\u043d\u0430-python",children:"\u041f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u044f \u043d\u0430 python"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from confluent_kafka import Producer\r\nimport json\r\nimport uuid\r\nfrom datetime import datetime\r\n\r\nproducer = Producer({\'bootstrap.servers\': \'localhost:9092\'})\r\n\r\ntransaction = {\r\n    "transactionId": str(uuid.uuid4()),\r\n    "userId": "user-123",\r\n    "category": "Food",\r\n    "amount": 150.0,\r\n    "currency": "USD",\r\n    "timestamp": datetime.utcnow().isoformat()\r\n}\r\n\r\nproducer.produce(\r\n    \'transactions\',\r\n    key=transaction[\'transactionId\'],\r\n    value=json.dumps(transaction),\r\n    callback=lambda err, msg: print(f"Delivered: {msg.topic()} [{msg.partition()}]") if not err else print(f"Error: {err}")\r\n)\r\n\r\nproducer.flush()\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430",children:"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'from confluent_kafka import Consumer, Producer\r\nimport json\r\nfrom datetime import datetime\r\nconsumer = Consumer({\r\n    \'bootstrap.servers\': \'localhost:9092\',\r\n    \'group.id\': \'analytics-group\',\r\n    \'auto.offset.reset\': \'earliest\'\r\n})\r\nproducer = Producer({\'bootstrap.servers\': \'localhost:9092\'})\r\nconsumer.subscribe([\'transactions\'])\r\nwhile True:\r\n    msg = consumer.poll(1.0)\r\n    if msg is None:\r\n        continue\r\n    if msg.error():\r\n        print(f"Error: {msg.error()}")\r\n        continue\r\n    transaction = json.loads(msg.value().decode(\'utf-8\'))\r\n    print(f"Processing transaction: {transaction}")\r\n    # \u041f\u0440\u0438\u043c\u0435\u0440 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445\r\n    report = {\r\n        "userId": transaction["userId"],\r\n        "category": transaction["category"],\r\n        "totalAmount": transaction["amount"],  # \u041f\u0440\u0438\u043c\u0435\u0440 \u0430\u0433\u0440\u0435\u0433\u0430\u0446\u0438\u0438\r\n        "currency": transaction["currency"],\r\n        "reportTimestamp": datetime.utcnow().isoformat()\r\n    }\r\n    producer.produce(\r\n        \'analytics_reports\',\r\n        key=report["userId"],\r\n        value=json.dumps(report),\r\n        callback=lambda err, msg: print(f"Delivered: {msg.topic()} [{msg.partition()}]") if not err else print(f"Error: {err}")\r\n    )\r\n    producer.flush()\r\nconsumer.close()\n'})})]})}function l(r={}){const{wrapper:n}={...(0,o.R)(),...r.components};return n?(0,a.jsx)(n,{...r,children:(0,a.jsx)(d,{...r})}):d(r)}},8453:(r,n,e)=>{e.d(n,{R:()=>s,x:()=>c});var t=e(6540);const a={},o=t.createContext(a);function s(r){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof r?r(n):{...n,...r}}),[n,r])}function c(r){let n;return n=r.disableParentContext?"function"==typeof r.components?r.components(a):r.components||a:s(r.components),t.createElement(o.Provider,{value:n},r.children)}}}]);